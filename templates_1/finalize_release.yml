# ===================================================================================
# ==                 README: Finalize Release - Step Template                    ==
# ===================================================================================
#
# CORRECTION (Auto Project Name):
# The 'microserviceProjectName' parameter has been REMOVED. This template now uses
# the built-in Azure DevOps variable '$(System.TeamProject)' to automatically
# determine the project name.
#
# ===================================================================================

parameters:
- name: repositoryName
  type: string
- name: releaseBranchName
  type: string

steps:
- task: Bash@3
  displayName: 'Configure Git Identity'
  # ... (script is the same)
- task: Bash@3
  displayName: 'Clone Repo'
  inputs:
    env: { GIT_TOKEN: $(System.AccessToken) }
    script: |
      set -e
      PROJECT_NAME_ENCODED=$(echo "$(System.TeamProject)" | sed 's/ /%20/g')
      REPO_URL="https://x-token-auth:$(GIT_TOKEN)@dev.azure.com/YourOrgName/${PROJECT_NAME_ENCODED}/_git/${{ parameters.repositoryName }}"
      git clone "$REPO_URL" service-repo
- task: Bash@3
  displayName: 'Merge, Tag, and Push Release'
  # ... (script is the same)